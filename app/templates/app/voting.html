<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Question 1 </title>
    <style> 
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #f0f0f0;
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    .card {
        background: #f0f0f0;
        border-radius: 12px;
        padding: 5rem;
        width: 400px;
        margin: auto;
        box-shadow: 0 4px 10px rgba(8, 8, 8, 0.1);
        text-align: center;
    }

    .question-subtitle {
        font-size: 1.1rem;
        color: #444;
        margin-bottom: 1rem;

    }

    .state-label {
        font-size: 1rem;
        color: #333;
        margin-bottom: 0.5rem;
    }

    .state-boxes {
        display: flex;
        justify-content: space-around;
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .state-option {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid transparent;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        transition: transform 0.2s ease;

    
    }
     
    .state-option-red { background: #e74c3c; }
    .state-option-yellow { background: #f1c40f; }
    .state-option-green { background: #2ecc71; }
    
    .state-option.selected {
        border-color: #000;
        transform: scale(1.1);
    }

    .comment-box {
        margin-top: 1rem;
        text-align: left;
    }

    textarea {
        width: 100%;
        padding: 10px;
        margin-top: 15px;
        border-radius: 8px;
        border: 1px solid #ccc;
        height: 80px;
        font-size: 1rem;
    }

    .submit-btn {
        background: #2ecc71;
        color: #fff;
        padding: 12px 20px;
        font-size: 1.1rem;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.3s;
        display: block;
        margin-top: 20px;
        width: 100%;
    }

    .submit.btn:hover {
        background: #27ae60;
    }
    
    .button-group {
        display: flex;
        justify-content: space-between
        align-items: center;
        width: 100%;
        margin-top; 20px;
    }

    .btn {
        background-color: grey;
        color: white;
        padding: 8px 12px;
        font-size: 1rem;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.3s;
        margin: 5px;
        width: 45%;
        border: none;
    }

    .btn:hover {
        background: #2980b9;
    }

    </style>
</head>
<body>

<form method="POST" action="{% url 'voting_page' team.id session.id %}">
    {% csrf_token %}

    <div class="card">
        <progress id="progressBar" value="0" max="10" style="width: 100%; height: 20px; margin-bottom: 20px;"></progress>
        <h2>Voting Questions</h2>

        {% comment %} START OF QUESTIONS {% endcomment %}
        <div class="questions-container">

        <div class="question-block">
        <div class="question-subtitle">1. Support</div>

    <div class="state-boxes">
        <button type="button" name="state1" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state1" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state1" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment1" placeholder="Feedback for Question 1..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">2. Teamwork</div>

    <div class="state-boxes">
        <button type="button" name="state2" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state2" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state2" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment2" placeholder="Feedback for Question 2..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">3. Suitable Process</div>

    <div class="state-boxes">
        <button type="button" name="state3" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state3" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state3" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment3" placeholder="Feedback for Question 3..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">4. Speed</div>

    <div class="state-boxes">
        <button type="button" name="state4" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state4" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state4" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment4" placeholder="Feedback for Question 4..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">5. Pawns or Players</div>

    <div class="state-boxes">
        <button type="button" name="state5" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state5" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state5" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment5" placeholder="Feedback for Question 5..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">6. Mission</div>

    <div class="state-boxes">
        <button type="button" name="state6" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state6" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state6" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment6" placeholder="Feedback for Question 6..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">7. Learning</div>

    <div class="state-boxes">
        <button type="button" name="state7" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state7" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state7" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment7" placeholder="Feedback for Question 7..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">8. Fun</div>

    <div class="state-boxes">
        <button type="button" name="state8" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state8" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state8" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment8" placeholder="Feedback for Question 8..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">9. Easy to release</div>

    <div class="state-boxes">
        <button type="button" name="state9" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state9" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state9" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment9" placeholder="Feedback for Question 9..."></textarea>
    </div>

    <div class="question-block">
        <div class="question-subtitle">10. Delivering Value</div>

    <div class="state-boxes">
        <button type="button" name="state10" value="1" class="state-option state-option-red"></button>
        <button type="button" name="state10" value="2" class="state-option state-option-yellow"></button>
        <button type="button" name="state10" value="3" class="state-option state-option-green"></button>
    </div>
    <textarea name="comment10" placeholder="Feedback for Question 10..."></textarea>
    </div>

        <button type="submit" class="submit btn">Submit</button>
        
        <div class="button-group">
        <button type="button" class="next-btn" onclick="goToNextPage()">Next</button>
        <button type="button" class="prev-btn" onclick="goToPreviousPage()">Previous</button>
        </div>

    </div>
</form>

<script>
    const stateButtons = document.querySelectorAll('.state-option');
    let selectedState = {};

    stateButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        const questionName = btn.getAttribute('name');


        const buttonsInSameQuestion = document.querySelectorAll(`.state-option[name="${questionName}"]`);
        buttonsInSameQuestion.forEach(b => b.classList.remove('selected'));

        btn.classList.add('selected');
        selectedState[questionName] = btn.getAttribute('value');
  });
});

    document.querySelector('form').addEventListener('submit', (e) => {
        const totalQuestions = questions.length;
        for (let i = 1; i <= totalQuestions; i++) {
            if (!selectedState[`state${i}`]) {
                e.preventDefault();
            alert("Please select a state!");
            return;
         }
      }

            for (let i =1; i <= totalQuestions; i++) {
          
            const hiddenInput = document.createElement('input');
            hiddenInput.type = 'hidden';
            hiddenInput.name = `state${i}`;
            hiddenInput.value = selectedState[`state${i}`];
            document.querySelector('form').appendChild(hiddenInput);

        }
    });

        const questions = document.querySelectorAll('.question-block');
        let currentQuestion = 0;

        function showQuestion(index) {
            questions.forEach(q => q.style.display = 'none');
            questions[index].style.display = 'block';

            document.getElementById('progressBar').value = index + 1
        }

        function goToNextPage() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                alert("You have reached the end! Submit the form");
            }
          }
                function goToPreviousPage() {
                    if (currentQuestion > 0) {
                        currentQuestion--;
                        showQuestion(currentQuestion)
                    }
                }

                showQuestion(0);
</script>
</body>
</html>

